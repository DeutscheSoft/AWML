<html>
  <head>
    <script type="module">
      import { define, assertEqual } from './testing.js';
      let clickEvent = null;

      window.clicked = function (ev) {
        clickEvent = ev;
      };
      define(() => {
        const button = document.querySelector('button');
        const event = new CustomEvent('click');
        button.dispatchEvent(event);
        assertEqual(event, clickEvent);
      });
    </script>
    <script type="module" src="../src/index.js"></script>
  </head>
  <body>
    <button>
      hello
      <awml-event type="click" callback="clicked"></awml-event>
    </button>
  </body>
</html>
